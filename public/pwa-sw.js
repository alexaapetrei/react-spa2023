const allTheQuestions = ["/chose", "/", "/categoria"];
const allTheImmages = [
  "/bear2023.svg",
  "/favicon.ico",
  "/img/a/1066.jpg",
  "/img/a/1067.jpg",
  "/img/a/1072.jpg",
  "/img/a/1076.jpg",
  "/img/a/1084.jpg",
  "/img/a/1087.jpg",
  "/img/a/1089.jpg",
  "/img/a/1091.jpg",
  "/img/a/1099.jpg",
  "/img/a/1104.jpg",
  "/img/a/1106.jpg",
  "/img/a/1108.jpg",
  "/img/a/1111.jpg",
  "/img/a/1114.jpg",
  "/img/a/1116.jpg",
  "/img/a/1126.jpg",
  "/img/a/1133.jpg",
  "/img/a/1137.jpg",
  "/img/a/1144.jpg",
  "/img/a/1155.jpg",
  "/img/a/1166.jpg",
  "/img/a/1171.jpg",
  "/img/a/1173.jpg",
  "/img/a/1184.jpg",
  "/img/a/1270.jpg",
  "/img/a/1304.jpg",
  "/img/a/1312.jpg",
  "/img/a/1329.jpg",
  "/img/a/1330.jpg",
  "/img/a/1331.jpg",
  "/img/a/1332.jpg",
  "/img/a/1340.jpg",
  "/img/a/1354.jpg",
  "/img/a/1356.jpg",
  "/img/a/1358.jpg",
  "/img/a/1359.jpg",
  "/img/a/1363.jpg",
  "/img/a/1364.jpg",
  "/img/a/1365.jpg",
  "/img/a/1366.jpg",
  "/img/a/1367.jpg",
  "/img/a/1368.jpg",
  "/img/a/1369.jpg",
  "/img/a/1370.jpg",
  "/img/a/1373.jpg",
  "/img/a/1374.jpg",
  "/img/a/1375.jpg",
  "/img/a/1376.jpg",
  "/img/a/1379.jpg",
  "/img/a/1380.jpg",
  "/img/a/1381.jpg",
  "/img/a/1382.jpg",
  "/img/a/1383.jpg",
  "/img/a/1384.jpg",
  "/img/a/1386.jpg",
  "/img/a/1387.jpg",
  "/img/a/1388.jpg",
  "/img/a/1389.jpg",
  "/img/a/1390.jpg",
  "/img/a/1391.jpg",
  "/img/a/1393.jpg",
  "/img/a/1394.jpg",
  "/img/a/1395.jpg",
  "/img/a/1396.jpg",
  "/img/a/1397.jpg",
  "/img/a/1398.jpg",
  "/img/a/1399.jpg",
  "/img/a/1402.jpg",
  "/img/a/1403.jpg",
  "/img/a/1405.jpg",
  "/img/a/1406.jpg",
  "/img/a/1407.jpg",
  "/img/a/1408.jpg",
  "/img/a/1409.jpg",
  "/img/a/1410.jpg",
  "/img/a/1411.jpg",
  "/img/a/1412.jpg",
  "/img/a/1413.jpg",
  "/img/a/1414.jpg",
  "/img/a/1415.jpg",
  "/img/a/1416.jpg",
  "/img/a/1417.jpg",
  "/img/a/1419.jpg",
  "/img/a/1420.jpg",
  "/img/a/1421.jpg",
  "/img/a/1422.jpg",
  "/img/a/1423.jpg",
  "/img/a/1424.jpg",
  "/img/a/1426.jpg",
  "/img/a/1427.jpg",
  "/img/a/1428.jpg",
  "/img/a/1429.jpg",
  "/img/a/1430.jpg",
  "/img/a/1431.jpg",
  "/img/a/1432.jpg",
  "/img/a/1433.jpg",
  "/img/a/1434.jpg",
  "/img/a/1435.jpg",
  "/img/a/1436.jpg",
  "/img/a/1437.jpg",
  "/img/a/1438.jpg",
  "/img/a/1439.jpg",
  "/img/a/1440.jpg",
  "/img/a/1441.jpg",
  "/img/a/1442.jpg",
  "/img/a/1443.jpg",
  "/img/a/1444.jpg",
  "/img/a/1445.jpg",
  "/img/a/1446.jpg",
  "/img/a/1447.jpg",
  "/img/a/1448.jpg",
  "/img/b/8.jpg",
  "/img/b/13.jpg",
  "/img/b/14.jpg",
  "/img/b/15.jpg",
  "/img/b/17.jpg",
  "/img/b/22.jpg",
  "/img/b/35.jpg",
  "/img/b/40.jpg",
  "/img/b/41.jpg",
  "/img/b/51.jpg",
  "/img/b/62.jpg",
  "/img/b/85.jpg",
  "/img/b/88.jpg",
  "/img/b/90.jpg",
  "/img/b/92.jpg",
  "/img/b/102.jpg",
  "/img/b/122.jpg",
  "/img/b/125.jpg",
  "/img/b/126.jpg",
  "/img/b/131.jpg",
  "/img/b/132.jpg",
  "/img/b/146.jpg",
  "/img/b/149.jpg",
  "/img/b/160.jpg",
  "/img/b/162.jpg",
  "/img/b/166.jpg",
  "/img/b/189.jpg",
  "/img/b/202.jpg",
  "/img/b/210.jpg",
  "/img/b/224.jpg",
  "/img/b/225.jpg",
  "/img/b/226.jpg",
  "/img/b/227.jpg",
  "/img/b/228.jpg",
  "/img/b/229.jpg",
  "/img/b/230.jpg",
  "/img/b/231.jpg",
  "/img/b/248.jpg",
  "/img/b/249.jpg",
  "/img/b/250.jpg",
  "/img/b/251.jpg",
  "/img/b/252.jpg",
  "/img/b/253.jpg",
  "/img/b/266.jpg",
  "/img/b/267.jpg",
  "/img/b/268.jpg",
  "/img/b/269.jpg",
  "/img/b/270.jpg",
  "/img/b/271.jpg",
  "/img/b/272.jpg",
  "/img/b/289.jpg",
  "/img/b/290.jpg",
  "/img/b/291.jpg",
  "/img/b/292.jpg",
  "/img/b/307.jpg",
  "/img/b/308.jpg",
  "/img/b/309.jpg",
  "/img/b/310.jpg",
  "/img/b/311.jpg",
  "/img/b/312.jpg",
  "/img/b/313.jpg",
  "/img/b/314.jpg",
  "/img/b/326.jpg",
  "/img/b/327.jpg",
  "/img/b/328.jpg",
  "/img/b/329.jpg",
  "/img/b/330.jpg",
  "/img/b/331.jpg",
  "/img/b/332.jpg",
  "/img/b/344.jpg",
  "/img/b/345.jpg",
  "/img/b/346.jpg",
  "/img/b/347.jpg",
  "/img/b/349.jpg",
  "/img/b/362.jpg",
  "/img/b/363.jpg",
  "/img/b/365.jpg",
  "/img/b/366.jpg",
  "/img/b/367.jpg",
  "/img/b/368.jpg",
  "/img/b/378.jpg",
  "/img/b/379.jpg",
  "/img/b/380.jpg",
  "/img/b/381.jpg",
  "/img/b/382.jpg",
  "/img/b/383.jpg",
  "/img/b/395.jpg",
  "/img/b/396.jpg",
  "/img/b/397.jpg",
  "/img/b/398.jpg",
  "/img/b/399.jpg",
  "/img/b/413.jpg",
  "/img/b/414.jpg",
  "/img/b/415.jpg",
  "/img/b/416.jpg",
  "/img/b/417.jpg",
  "/img/b/418.jpg",
  "/img/b/428.jpg",
  "/img/b/429.jpg",
  "/img/b/439.jpg",
  "/img/b/440.jpg",
  "/img/b/441.jpg",
  "/img/b/442.jpg",
  "/img/b/443.jpg",
  "/img/b/444.jpg",
  "/img/b/455.jpg",
  "/img/b/456.jpg",
  "/img/b/458.jpg",
  "/img/b/468.jpg",
  "/img/b/469.jpg",
  "/img/b/470.jpg",
  "/img/b/471.jpg",
  "/img/b/472.jpg",
  "/img/b/473.jpg",
  "/img/b/474.jpg",
  "/img/b/484.jpg",
  "/img/b/485.jpg",
  "/img/b/486.jpg",
  "/img/b/487.jpg",
  "/img/b/488.jpg",
  "/img/b/489.jpg",
  "/img/b/490.jpg",
  "/img/b/497.jpg",
  "/img/b/498.jpg",
  "/img/b/499.jpg",
  "/img/b/500.jpg",
  "/img/b/501.jpg",
  "/img/b/502.jpg",
  "/img/b/509.jpg",
  "/img/b/510.jpg",
  "/img/b/511.jpg",
  "/img/b/512.jpg",
  "/img/b/513.jpg",
  "/img/b/522.jpg",
  "/img/b/523.jpg",
  "/img/b/524.jpg",
  "/img/b/525.jpg",
  "/img/b/532.jpg",
  "/img/b/533.jpg",
  "/img/b/534.jpg",
  "/img/b/535.jpg",
  "/img/b/544.jpg",
  "/img/b/545.jpg",
  "/img/b/546.jpg",
  "/img/b/547.jpg",
  "/img/b/548.jpg",
  "/img/b/549.jpg",
  "/img/b/565.jpg",
  "/img/b/566.jpg",
  "/img/b/567.jpg",
  "/img/b/568.jpg",
  "/img/b/569.jpg",
  "/img/b/578.jpg",
  "/img/b/579.jpg",
  "/img/b/587.jpg",
  "/img/b/588.jpg",
  "/img/b/589.jpg",
  "/img/b/590.jpg",
  "/img/b/599.jpg",
  "/img/b/600.jpg",
  "/img/b/605.jpg",
  "/img/b/606.jpg",
  "/img/b/607.jpg",
  "/img/b/608.jpg",
  "/img/b/609.jpg",
  "/img/b/610.jpg",
  "/img/b/618.jpg",
  "/img/b/619.jpg",
  "/img/b/620.jpg",
  "/img/b/627.jpg",
  "/img/b/628.jpg",
  "/img/b/629.jpg",
  "/img/b/635.jpg",
  "/img/b/636.jpg",
  "/img/b/637.jpg",
  "/img/b/638.jpg",
  "/img/b/646.jpg",
  "/img/b/647.jpg",
  "/img/b/648.jpg",
  "/img/b/649.jpg",
  "/img/b/661.jpg",
  "/img/b/662.jpg",
  "/img/b/663.jpg",
  "/img/b/664.jpg",
  "/img/b/673.jpg",
  "/img/b/674.jpg",
  "/img/b/691.jpg",
  "/img/b/692.jpg",
  "/img/b/693.jpg",
  "/img/b/694.jpg",
  "/img/b/699.jpg",
  "/img/b/700.jpg",
  "/img/b/701.jpg",
  "/img/b/702.jpg",
  "/img/b/703.jpg",
  "/img/b/709.jpg",
  "/img/b/710.jpg",
  "/img/b/717.jpg",
  "/img/b/718.jpg",
  "/img/b/728.jpg",
  "/img/b/729.jpg",
  "/img/b/730.jpg",
  "/img/b/731.jpg",
  "/img/b/737.jpg",
  "/img/b/738.jpg",
  "/img/b/739.jpg",
  "/img/b/740.jpg",
  "/img/b/748.jpg",
  "/img/b/754.jpg",
  "/img/b/755.jpg",
  "/img/b/759.jpg",
  "/img/b/760.jpg",
  "/img/b/771.jpg",
  "/img/b/772.jpg",
  "/img/b/773.jpg",
  "/img/b/774.jpg",
  "/img/b/776.jpg",
  "/img/b/779.jpg",
  "/img/b/780.jpg",
  "/img/b/787.jpg",
  "/img/b/788.jpg",
  "/img/b/795.jpg",
  "/img/b/796.jpg",
  "/img/b/799.jpg",
  "/img/b/808.jpg",
  "/img/b/809.jpg",
  "/img/b/815.jpg",
  "/img/b/818.jpg",
  "/img/b/819.jpg",
  "/img/b/821.jpg",
  "/img/b/827.jpg",
  "/img/b/828.jpg",
  "/img/b/838.jpg",
  "/img/b/839.jpg",
  "/img/b/852.jpg",
  "/img/b/854.jpg",
  "/img/b/855.jpg",
  "/img/b/857.jpg",
  "/img/b/860.jpg",
  "/img/b/862.jpg",
  "/img/b/863.jpg",
  "/img/b/865.jpg",
  "/img/b/866.jpg",
  "/img/b/868.jpg",
  "/img/b/869.jpg",
  "/img/b/870.jpg",
  "/img/b/871.jpg",
  "/img/b/872.jpg",
  "/img/b/874.jpg",
  "/img/b/882.jpg",
  "/img/b/884.jpg",
  "/img/b/893.jpg",
  "/img/b/897.jpg",
  "/img/b/898.jpg",
  "/img/b/905.jpg",
  "/img/b/907.jpg",
  "/img/b/908.jpg",
  "/img/b/910.jpg",
  "/img/b/912.jpg",
  "/img/b/915.jpg",
  "/img/b/918.jpg",
  "/img/b/923.jpg",
  "/img/b/924.jpg",
  "/img/b/927.jpg",
  "/img/b/932.jpg",
  "/img/b/934.jpg",
  "/img/b/935.jpg",
  "/img/b/938.jpg",
  "/img/b/940.jpg",
  "/img/b/941.jpg",
  "/img/b/942.jpg",
  "/img/b/946.jpg",
  "/img/b/947.jpg",
  "/img/b/948.jpg",
  "/img/b/953.jpg",
  "/img/b/954.jpg",
  "/img/b/957.jpg",
  "/img/b/959.jpg",
  "/img/b/960.jpg",
  "/img/b/965.jpg",
  "/img/b/966.jpg",
  "/img/b/967.jpg",
  "/img/b/969.jpg",
  "/img/b/970.jpg",
  "/img/b/971.jpg",
  "/img/b/974.jpg",
  "/img/b/977.jpg",
  "/img/b/982.jpg",
  "/img/b/983.jpg",
  "/img/b/985.jpg",
  "/img/b/990.jpg",
  "/img/b/994.jpg",
  "/img/b/995.jpg",
  "/img/b/996.jpg",
  "/img/b/997.jpg",
  "/img/b/998.jpg",
  "/img/b/1002.jpg",
  "/img/b/1007.jpg",
  "/img/b/1008.jpg",
  "/img/b/1010.jpg",
  "/img/b/1011.jpg",
  "/img/b/1015.jpg",
  "/img/b/1017.jpg",
  "/img/b/1018.jpg",
  "/img/b/1026.jpg",
  "/img/b/1027.jpg",
  "/img/b/1029.jpg",
  "/img/b/1034.jpg",
  "/img/b/1037.jpg",
  "/img/b/1040.jpg",
  "/img/b/1044.jpg",
  "/img/b/1045.jpg",
  "/img/b/1048.jpg",
  "/img/b/1052.jpg",
  "/img/b/1053.jpg",
  "/img/b/1055.jpg",
  "/img/b/1061.jpg",
  "/img/b/1063.jpg",
  "/img/b/2414.jpg",
  "/img/b/2485.jpg",
  "/img/b/2493.jpg",
  "/img/b/2854.jpg",
  "/img/b/2855.jpg",
  "/img/b/2857.jpg",
  "/img/b/2859.jpg",
  "/img/b/2860.jpg",
  "/img/b/2876.jpg",
  "/img/b/3686.jpg",
  "/img/b/3687.jpg",
  "/img/b/3688.jpg",
  "/img/b/3689.jpg",
  "/img/b/3690.jpg",
  "/img/b/3691.jpg",
  "/img/b/3692.jpg",
  "/img/b/3694.jpg",
  "/img/b/3697.jpg",
  "/img/b/3699.jpg",
  "/img/b/3700.jpg",
  "/img/b/3701.jpg",
  "/img/b/3705.jpg",
  "/img/b/3706.jpg",
  "/img/b/3707.jpg",
  "/img/b/3708.jpg",
  "/img/b/3711.jpg",
  "/img/b/3712.jpg",
  "/img/b/3713.jpg",
  "/img/b/3714.jpg",
  "/img/b/3715.jpg",
  "/img/b/3717.jpg",
  "/img/b/3718.jpg",
  "/img/b/3721.jpg",
  "/img/b/3723.jpg",
  "/img/b/3724.jpg",
  "/img/b/3725.jpg",
  "/img/b/3728.jpg",
  "/img/b/3731.jpg",
  "/img/b/3736.jpg",
  "/img/b/3741.jpg",
  "/img/b/3742.jpg",
  "/img/b/3743.jpg",
  "/img/b/3744.jpg",
  "/img/b/3745.jpg",
  "/img/b/3749.jpg",
  "/img/b/3750.jpg",
  "/img/b/3751.jpg",
  "/img/b/3752.jpg",
  "/img/b/3754.jpg",
  "/img/b/3759.jpg",
  "/img/b/3762.jpg",
  "/img/b/3763.jpg",
  "/img/b/3944.jpg",
  "/img/b/3946.jpg",
  "/img/b/3947.jpg",
  "/img/b/3948.jpg",
  "/img/b/3949.jpg",
  "/img/b/3953.jpg",
  "/img/b/3954.jpg",
  "/img/c/1451.jpg",
  "/img/c/1457.jpg",
  "/img/c/1459.jpg",
  "/img/c/1467.jpg",
  "/img/c/1468.jpg",
  "/img/c/1471.jpg",
  "/img/c/1475.jpg",
  "/img/c/1484.jpg",
  "/img/c/1490.jpg",
  "/img/c/1495.jpg",
  "/img/c/1513.jpg",
  "/img/c/1528.jpg",
  "/img/c/1533.jpg",
  "/img/c/1545.jpg",
  "/img/c/1550.jpg",
  "/img/c/1556.jpg",
  "/img/c/1557.jpg",
  "/img/c/1574.jpg",
  "/img/c/1580.jpg",
  "/img/c/1582.jpg",
  "/img/c/1585.jpg",
  "/img/c/1587.jpg",
  "/img/c/1589.jpg",
  "/img/c/1592.jpg",
  "/img/c/1599.jpg",
  "/img/c/1607.jpg",
  "/img/c/1610.jpg",
  "/img/c/1612.jpg",
  "/img/c/1620.jpg",
  "/img/c/1629.jpg",
  "/img/c/1641.jpg",
  "/img/c/1652.jpg",
  "/img/c/1670.jpg",
  "/img/c/1672.jpg",
  "/img/c/1699.jpg",
  "/img/c/1730.jpg",
  "/img/c/1912.jpg",
  "/img/c/1927.jpg",
  "/img/d/1947.jpg",
  "/img/d/1948.jpg",
  "/img/d/1949.jpg",
  "/img/d/1962.jpg",
  "/img/d/1964.jpg",
  "/img/d/1969.jpg",
  "/img/d/1976.jpg",
  "/img/d/1978.jpg",
  "/img/d/1981.jpg",
  "/img/d/2000.jpg",
  "/img/d/2005.jpg",
  "/img/d/2022.jpg",
  "/img/d/2029.jpg",
  "/img/d/2041.jpg",
  "/img/d/2062.jpg",
  "/img/d/2069.jpg",
  "/img/d/2088.jpg",
  "/img/d/2090.jpg",
  "/img/d/2102.jpg",
  "/img/d/2106.jpg",
  "/img/d/2110.jpg",
  "/img/d/2111.jpg",
  "/img/d/2120.jpg",
  "/img/d/2151.jpg",
  "/img/d/2173.jpg",
  "/img/d/2206.jpg",
  "/img/d/2221.jpg",
];
// import workbox from "workbox-sw";
// eslint-disable-next-line no-undef
importScripts(
  "https://storage.googleapis.com/workbox-cdn/releases/7.0.0/workbox-sw.js"
);
import { precacheAndRoute } from "workbox-precaching";

precacheAndRoute(self.__WB_MANIFEST);

const HTML_CACHE = "html";
const JS_CACHE = "javascript";
const STYLE_CACHE = "stylesheets";
const IMAGE_CACHE = "images";
const FONT_CACHE = "fonts";

self.addEventListener("message", (event) => {
  if (event.data && event.data.type === "SKIP_WAITING") {
    self.skipWaiting();
  }
});

workbox.routing.registerRoute(
  ({ event }) => event.request.destination === "document",
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: HTML_CACHE,
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 3000,
      }),
    ],
  })
);

workbox.routing.registerRoute(
  ({ event }) => event.request.destination === "script",
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: JS_CACHE,
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 15,
      }),
    ],
  })
);

workbox.routing.registerRoute(
  ({ event }) => event.request.destination === "style",
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: STYLE_CACHE,
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 15,
      }),
    ],
  })
);

workbox.routing.registerRoute(
  ({ event }) => event.request.destination === "image",
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: IMAGE_CACHE,
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 3000,
      }),
    ],
  })
);

workbox.routing.registerRoute(
  ({ event }) => event.request.destination === "font",
  new workbox.strategies.StaleWhileRevalidate({
    cacheName: FONT_CACHE,
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 15,
      }),
    ],
  })
);

addEventListener("install", (event) => {
  event.waitUntil(registerCache());
});

async function registerCache() {
  const imageCache = await caches.open(IMAGE_CACHE);
  const htmlCache = await caches.open(HTML_CACHE);
  const imageUrlsToCache = allTheImmages;
  const questionUrlsToCache = allTheQuestions;

  const BATCH_SIZE = 50;

  console.info("Service worker caching all");

  // Function to cache URLs with a specific cache
  const cacheUrls = async (urls, cache) => {
    for (let i = 0; i < urls.length; i += BATCH_SIZE) {
      const batch = urls.slice(i, i + BATCH_SIZE);
      const addCachePromises = batch.map((url) =>
        cache
          .add(url)
          .catch((error) =>
            console.warn(`WAT - Failed to cache ${url}: ${error}`)
          )
      );

      await Promise.all(addCachePromises);
    }
  };

  // Cache images
  await cacheUrls(imageUrlsToCache, imageCache);

  // Cache questions
  await cacheUrls(questionUrlsToCache, htmlCache);
}
